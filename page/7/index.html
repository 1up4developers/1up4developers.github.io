
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>1up4developers</title>
  <meta name="author" content="1up4developers">

  
  <meta name="description" content="Rufus é um conjunto de gems utilizado para Workflow e BPM. O rufus-scheduler é a gem responsável pelo agendamento e execução de tarefas (jobs). Se &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://1up4dev.org/page/7/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/1up4developers" rel="alternate" title="1up4developers" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-6134014-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <img src="/images/logo-1up-small.png" style="float: left; margin-top: 11px; margin-right: 30px;" alt="1up4developers logo">
  <h1><a href="/">1up4developers</a></h1>
  
    <h2>Nadando contra o Waterfall. tail -f /mind/realworld >> /blog</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/1up4developers" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:1up4dev.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/05/agendando-tarefas-em-aplicacoes-rails-com-rufus-scheduler/">Agendando Tarefas Em Aplicações Rails Com Rufus-scheduler</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-05-31T18:33:06+00:00" pubdate data-updated="true">May 31<span>st</span>, 2009</time>
        | 
  


  <span class="byline author vcard">Posted by <span class="fn"><a class='author' href='/author/rodrigopanachi/'>Rodrigo Panachi</a></span></span>


        
         | <a href="/2009/05/agendando-tarefas-em-aplicacoes-rails-com-rufus-scheduler/#disqus_thread">Comments</a>
        
      </p>
    
    
      <br/>
      
  
  


<div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://1up4dev.org/2009/05/agendando-tarefas-em-aplicacoes-rails-com-rufus-scheduler/" data-text="Agendando tarefas em aplicações Rails com rufus-scheduler" data-via="1up4dev" data-counturl="http://1up4dev.org/2009/05/agendando-tarefas-em-aplicacoes-rails-com-rufus-scheduler/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium" data-href="http://1up4dev.org/2009/05/agendando-tarefas-em-aplicacoes-rails-com-rufus-scheduler/"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false" data-url="http://1up4dev.org/2009/05/agendando-tarefas-em-aplicacoes-rails-com-rufus-scheduler/"></div>
  
</div>

    
  </header>


  <div class="entry-content"><p><a href="http://rufus.rubyforge.org/">Rufus</a> é um conjunto de gems utilizado para <a href="http://pt.wikipedia.org/wiki/Fluxo_de_Trabalho">Workflow</a> e <a href="http://pt.wikipedia.org/wiki/Business_Process_Management">BPM</a>. O <a href="http://rufus.rubyforge.org/rufus-scheduler/">rufus-scheduler</a> é a gem responsável pelo agendamento e execução de tarefas (jobs). Se você programa em Java e conhece o <a href="http://www.opensymphony.com/quartz/wikidocs/QuickStart.html">Quartz</a> não vai ter dificuldade em utilizá-la.</p>

<p>Instalação:</p>

<pre><code>sudo gem install rufus-scheduler
</code></pre>

<p>Utilização:</p>

<pre><code>require 'rubygems'
require 'rufus/scheduler'

scheduler = Rufus::Scheduler.start_new

scheduler.every '5m' do
  puts 'Executando a cada 5 minutos'
end

scheduler.schedule '0 18 * * *' do
  puts 'Executando todos os dias as 18h'
end
</code></pre>

<p>Simples assim! Consulte a <a href="http://rufus.rubyforge.org/rufus-scheduler/">documentação</a> oficial ou <a href="http://github.com/jmettraux/rufus-scheduler/tree/master">contribua com o código</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/05/gerando-cheat-sheet-para-os-snippets-do-gedit/">Gerando Cheat Sheet Para Os Snippets Do Gedit</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-05-05T08:00:37+00:00" pubdate data-updated="true">May 5<span>th</span>, 2009</time>
        | 
  


  <span class="byline author vcard">Posted by <span class="fn"><a class='author' href='/author/rogerbarreto/'>Roger Leite</a></span></span>


        
         | <a href="/2009/05/gerando-cheat-sheet-para-os-snippets-do-gedit/#disqus_thread">Comments</a>
        
      </p>
    
    
      <br/>
      
  
  


<div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://1up4dev.org/2009/05/gerando-cheat-sheet-para-os-snippets-do-gedit/" data-text="Gerando cheat sheet para os snippets do gedit" data-via="1up4dev" data-counturl="http://1up4dev.org/2009/05/gerando-cheat-sheet-para-os-snippets-do-gedit/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium" data-href="http://1up4dev.org/2009/05/gerando-cheat-sheet-para-os-snippets-do-gedit/"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false" data-url="http://1up4dev.org/2009/05/gerando-cheat-sheet-para-os-snippets-do-gedit/"></div>
  
</div>

    
  </header>


  <div class="entry-content"><p>Acredito que a maioria de vocês conhecem e/ou já usaram as famosas <em>cheat sheets</em> (tradução para &ldquo;cola&rdquo;?) para algo. Costumo usá-las quando quero fixar algum conceito novo ou simplesmente para consultas rápidas. Com o pai Google, é possível encontrar os mais diversos tipos: <a href="http://www.google.com.br/search?q=cheat+sheet+HTML&amp;ie=utf-8&amp;oe=utf-8&amp;aq=t&amp;rls=com.ubuntu:en-US:unofficial&amp;client=firefox-a">HTML</a>, <a href="http://www.google.com.br/search?hl=pt-BR&amp;client=firefox-a&amp;rls=com.ubuntu%3Aen-US%3Aunofficial&amp;hs=Ejh&amp;q=cheat+sheet+Ruby&amp;btnG=Pesquisar&amp;meta=">Ruby</a>, <a href="http://www.google.com.br/search?hl=pt-BR&amp;client=firefox-a&amp;rls=com.ubuntu%3Aen-US%3Aunofficial&amp;hs=WQ2&amp;q=cheat+sheet+Ruby+on+Rails&amp;btnG=Pesquisar&amp;meta=">Ruby on Rails</a>, <a href="http://www.google.com.br/search?hl=pt-BR&amp;client=firefox-a&amp;rls=com.ubuntu%3Aen-US%3Aunofficial&amp;hs=h7M&amp;q=cheat+sheet+Shell+Script&amp;btnG=Pesquisar&amp;meta=">Shell Script</a>&hellip; etc.</p>

<p>Atualmente venho praticando Ruby, sendo o gedit &ndash; &ldquo;tunado&rdquo; com vários plugins &ndash; o meu maior aliado. Um dos plugins que mais me ajuda é o <a href="http://live.gnome.org/Gedit/Plugins/Snippets">Snippets</a> e neste <a href="http://cassiomarques.wordpress.com/2008/09/16/gedit-snippets/">post do Cássio Marques</a>, você encontra uma breve descrição do que é, e um link para snippets de exemplo.</p>

<p>Tudo isso foi só pra contar o que me levou a criar a gem gedit-snippets-tool. Com ela é possível criar <em>cheat sheets</em> dos seus snippets. Supondo que você tenha ruby e rubygem instalados, seu modo de uso é muito simples. Para instalar a gem execute:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo gem install rogerleite-gedit-snippets-tool -s http://gems.github.com
</span></code></pre></td></tr></table></div></figure>


<p>Após a instalação, para gerar um <em>cheat sheet</em> com todos os seus snippets, execute:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>gedit-snippets-tool -cs &gt; ~/mycheatsheet.xhtml
</span></code></pre></td></tr></table></div></figure>


<p>Caso tenha muitos snippets, e deseja criar um cheat sheet somente com Ruby e Ruby on Rails por exemplo, execute:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gedit-snippets-tool -cs ruby* > ~/mycheatsheet.xhtml</span></code></pre></td></tr></table></div></figure>


<p><a href="/images/uploads/2009/04/cheatsheet-example.png"><img src="/images/uploads/2009/04/cheatsheet-example-291x300.png" alt="Meu cheat sheet de exemplo" /></a></p>

<p>Levando em conta que a gem foi feita em três dias e focamos somente o necessário para lançarmos uma versão 0.x &ldquo;em produção&rdquo;, vamos as limitações:</p>

<ul>
<li><p>O gedit-snippets-tool lê os snippets (arquivos XML) que estão na pasta &ldquo;home&rdquo;. Constatei que o gedit &ldquo;limpo&rdquo; logo após habilitar o plugin Snippets, guarda os snippets na pasta &ldquo;/usr/share/gedit-2/plugins/snippets/&rdquo;. Bom, se for este o seu caso, peço a gentileza de copiá-los para a &ldquo;home&rdquo; em &ldquo;{home-folder}/.gnome2/gedit/snippets/&rdquo;.</p></li>
<li><p>O template usado para gerar a página xhtml está bem &ldquo;rústico&rdquo;. O lado bom disso é que está bem fácil de alterá-lo. Vejam o código do template (via gist, leitores de RSS, sorry):</p></li>
</ul>


<p>Quem tiver sugestões (<strong>inclusive</strong> de template), podem forkar o projeto ou se quiser, deixe um comentário que eu entro em contato.</p>

<h3>Sobre o Desenvolvimento</h3>

<p>Assim que tive a idéia, análisei o que seria necessário, e resumindo:</p>

<ul>
<li><p>Ler os XMLs dos snippets;</p></li>
<li><p>Uma engine para gerar páginas através de &ldquo;templates&rdquo;;</p></li>
<li><p>Fazer uma gem executável&hellip; pois assim é mais fácil e rápido para quem quiser usá-la;</p></li>
</ul>


<p>A parte do XML é fácil, pois até já fiz coisa parecida <a href="http://1up4dev.org/2008/08/tpw-colocando-dicas-em-pratica/">antes</a>. A parte da engine para templates, o pai Google me guiou a uma ótima, chamada <a href="http://www.kuwata-lab.com/erubis/">Erubis</a>, que é uma gem e torna as coisas muito mais fáceis.</p>

<p>Para criar o esqueleto da gem, usei o <a href="http://github.com/dcrec1/gemhub">gemhub</a> do <a href="http://www.mouseoverstudio.com/blog/2008/10/27/criando-gems-com-gemhub-nunca-foi-tao-simples/">Diego Carrion</a>, que facilitou muito o meu trabalho, sem contar a ajuda que me deu na hora de publicar o gemspec no github&hellip; valeu truta! Bom, o resto foram três noites programando e aprendendo a fazer a minha primeira gem. Quem quiser participar estão todos convidados a &ldquo;forka-lo&rdquo; no <a href="http://github.com/rogerleite/gedit-snippets-tool">github</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/05/jquery-datatables-github-apilinks-semana/">jQuery DataTables, GitHub API E Links Da Semana</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-05-04T04:00:27+00:00" pubdate data-updated="true">May 4<span>th</span>, 2009</time>
        | 
  


  <span class="byline author vcard">Posted by <span class="fn"><a class='author' href='/author/admin/'>Equipe 1up4developers</a></span></span>


        
         | <a href="/2009/05/jquery-datatables-github-apilinks-semana/#disqus_thread">Comments</a>
        
      </p>
    
    
      <br/>
      
  
  


<div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://1up4dev.org/2009/05/jquery-datatables-github-apilinks-semana/" data-text="jQuery DataTables, GitHub API e links da semana" data-via="1up4dev" data-counturl="http://1up4dev.org/2009/05/jquery-datatables-github-apilinks-semana/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium" data-href="http://1up4dev.org/2009/05/jquery-datatables-github-apilinks-semana/"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false" data-url="http://1up4dev.org/2009/05/jquery-datatables-github-apilinks-semana/"></div>
  
</div>

    
  </header>


  <div class="entry-content"><h2><a href="http://www.datatables.net/">jQuery DataTables</a></h2>

<p>Nós somos fãs de jQuery pela sua simplicidade e poder de extensão através de plugins. Falando nisso, este plugin torna qualquer tabela <table/> em um &ldquo;grid&rdquo; ordenável, pesquisavel e paginável <em>automagicamente</em>.</p>

<p><a href="/images/uploads/2009/05/datatables.png"><img src="/images/uploads/2009/05/datatables-300x86.png" alt="" /></a></p>

<p>Para usar, basta incluir o plugin na página após o jQuery e executar o script:</p>

<pre><code>$(document).ready(function() {
    $("id-tabela").dataTable();
}
</code></pre>

<p>No <a href="http://www.datatables.net/">site oficial</a> é possível consultar a documentação, exemplos e a <a href="http://www.datatables.net/plug-ins#language">tradução</a> para pt-br.</p>

<h2><a href="http://github.com/blog/413-github-api-take-two">GitHub API, version 2</a></h2>

<p>Os caras do GitHub não são fracos não&hellip; já faz um tempinho, mas antes tarde do que nunca, anunciaram em seu <a href="http://github.com/blog">blog</a> a versão 2 do GitHub API. Ela provê acesso à &ldquo;Repository, User, Commit, Object and Network&rdquo; e futuramente ao Gist também. Como é a primeira release e ainda estão trabalhando nela, o próprio pessoal do Github pede ajuda a &ldquo;desbravadores&rdquo; e que abram tickets, caso encontrem algo. Documentação você encontra em  <a href="http://develop.github.com">develop.github.com</a>.</p>

<h2>Links da semana</h2>

<p><a href="http://www.desenvolvimentoparaweb.com/usabilidade/8-caracteristicas-de-user-interfaces-ui-de-sucesso/">8 características de User Interfaces (UI) de sucesso</a></p>

<p><a href="http://github.com/ryanb/nifty-generators/tree/master">Nifty Generators para Ruby on Rails</a></p>

<p><a href="http://olabini.com/blog/2009/04/jruby-on-rails-on-google-app-engine/">JRuby on Rails no Google App Engine</a></p>

<p><a href="http://www.ajaxianos.com.br/2008/10/grid-com-ordenacao-e-paginacao-animados/">Grid com ordenação e paginação animados</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/guia-de-ruby-do-why-autospec-autotest-notification/">Guia De Ruby Do Why E Autospec-notification</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-27T04:00:03+00:00" pubdate data-updated="true">Apr 27<span>th</span>, 2009</time>
        | 
  


  <span class="byline author vcard">Posted by <span class="fn"><a class='author' href='/author/admin/'>Equipe 1up4developers</a></span></span>


        
         | <a href="/2009/04/guia-de-ruby-do-why-autospec-autotest-notification/#disqus_thread">Comments</a>
        
      </p>
    
    
      <br/>
      
  
  


<div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://1up4dev.org/2009/04/guia-de-ruby-do-why-autospec-autotest-notification/" data-text="Guia de Ruby do Why e Autospec-notification" data-via="1up4dev" data-counturl="http://1up4dev.org/2009/04/guia-de-ruby-do-why-autospec-autotest-notification/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium" data-href="http://1up4dev.org/2009/04/guia-de-ruby-do-why-autospec-autotest-notification/"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false" data-url="http://1up4dev.org/2009/04/guia-de-ruby-do-why-autospec-autotest-notification/"></div>
  
</div>

    
  </header>


  <div class="entry-content"><h2>O comovente guia de Ruby do Why</h2>

<p>Este <a href="http://poignantguide.net/ruby/">livro</a> é sensacional e demonstra exatamente o espírito do Ruby: papo de programador.</p>

<p><a href="/images/uploads/2009/04/thefoxes-3.png"><img src="/images/uploads/2009/04/thefoxes-3.png" alt="" /></a></p>

<p>O livro é bem divertido. As tirinhas das raposas são ótimas. Várias <a href="http://www.nomedojogo.com/2008/10/28/why%E2%80%99s-poignant-guide-to-ruby-em-portugues/">pessoas</a> <a href="http://akitaonrails.com/2008/5/14/vamos-traduzir-o-why-s-poignant-guide-to-ruby">contribuíram</a> com a tradução para pt-br que está disponível no <a href="http://github.com/carlosbrando/poignant-br/tree/master">Github</a>.</p>

<p><a href="http://why.nomedojogo.com/">Leitura obrigatória</a>. Chunky bacon!</p>

<h2>Autospec-notification</h2>

<p>O <a href="http://www.nateclark.com/articles/2008/09/17/_autotest_-is-now-_autospec_-how-to-set-up-autospec-for-rspec-and-rails-with-zentest">Autospec</a> é um script gerado pelo <a href="http://rspec.info/">RSpec</a> que utiliza o Autotest para rodar os testes automaticamente a cada alteração no código.</p>

<p>Unindo o útil ao agradável, foi criado o <a href="http://www.mouseoverstudio.com/blog/2008/10/10/autospec-autotest-notification-autospec-notification-e-novidades/">Autospec-notification</a>, que exibe as notificações do autospec no desktop.</p>

<p><a href="/images/uploads/2009/04/sucesso.png"><img src="/images/uploads/2009/04/sucesso.png" alt="" /></a></p>

<p>Para instalar, comece pela gem ZenTest:</p>

<pre><code>sudo gem install ZenTest
</code></pre>

<p>No linux, instale o Libnotify:</p>

<pre><code>sudo apt-get install libnotify-bin
</code></pre>

<p>Agora instale a gem do autotest-notification:</p>

<pre><code>sudo gem install carlosbrando-autotest-notification --source=http://gems.github.com
</code></pre>

<p>Ative o autotest-notification e rode o autospec no seu projeto:</p>

<pre><code>an-install




script/autospec
</code></pre>

<p>O código está no <a href="http://github.com/carlosbrando/autotest-notification/tree/master">Github</a>. Escreva seus testes e divirta-se!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/agilidade-e-a-buzzword-do-momento/">Agilidade é a Buzzword Do Momento</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-22T14:46:42+00:00" pubdate data-updated="true">Apr 22<span>nd</span>, 2009</time>
        | 
  


  <span class="byline author vcard">Posted by <span class="fn"><a class='author' href='/author/rodrigopanachi/'>Rodrigo Panachi</a></span></span>


        
         | <a href="/2009/04/agilidade-e-a-buzzword-do-momento/#disqus_thread">Comments</a>
        
      </p>
    
    
      <br/>
      
  
  


<div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://1up4dev.org/2009/04/agilidade-e-a-buzzword-do-momento/" data-text="Agilidade é a buzzword do momento" data-via="1up4dev" data-counturl="http://1up4dev.org/2009/04/agilidade-e-a-buzzword-do-momento/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium" data-href="http://1up4dev.org/2009/04/agilidade-e-a-buzzword-do-momento/"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false" data-url="http://1up4dev.org/2009/04/agilidade-e-a-buzzword-do-momento/"></div>
  
</div>

    
  </header>


  <div class="entry-content"><p>Nos últimos anos o mercado de TI cresceu exponencialmente. Surgiram desde pequenas empresas especializadas em construir websites até monstruosas fábricas de software com seus contratos milionários. Algumas com orçamento limitado outras com dinheiro jorrando pelos canos. Umas com problemas por falta de organização outras com problemas burocráticos. Bons profissionais vs. equipes de sobrinhos, habilidade técnica contra enxurradas de documentos&hellip; muito fracasso, pouco sucesso.</p>

<h2>A meta é coletar as moedas até conseguirmos uma estrela</h2>

<p>Surgiram muitas empresas especializadas em desenvolver software ou que têm um software como produto principal. Normalmente, essas empresas se preocupam apenas em satisfazer os investidores e se esquecem dos clientes. Focam em vender e deixam a qualidade de lado. Prezam pela imagem e ignoram os problemas.</p>

<p>É uma triste realidade que essas empresas tenham mais <a href="http://www.youtube.com/watch?v=R47Xe8kVrv0">executivos</a> do que programadores. Como diz o <a href="http://www.luli.com.br/">Luli Radfahrer</a>, <em>executivos são aqueles seres que se vestem com um pensamento fracassado, usam uma linguagem própria sendo uma mistura de termos que só eles entendem e 20% de palavras em inglês</em>&hellip; não vivem os problemas reais da empresa. É como se estivessem em outro mundo: Mario World!</p>

<p><a href="/images/uploads/2009/04/marioland-clean.jpg"><img src="/images/uploads/2009/04/marioland-clean-300x188.jpg" alt="" /></a></p>

<p>A maioria das empresas que têm problemas com desenvolvimento de software ainda estão vivendo na década de 90. Internet ainda é uma palavra assustadora. Programador é apenas um funcionário que sabe o que significam siglas de informática e sabem mexer no computador. Mudança ainda é encarada como algo arriscado, que deve ser planejado, estudado e aprovado pelo presidente, diretoria e gestores. A palavra da vez é <strong>processo</strong> e seu fiel companheiro é <strong>prazo</strong>. A burocracia é uma amiga que garante que as coisas não fujam de controle. Nesse cenário não há como fugir do waterfall.</p>

<p>O maior problema do waterfall são os papéis: cada um com sua &ldquo;especialidade&rdquo;. Alguém determina que um <del>infeliz</del> funcionário vai ser responsável por &ldquo;levantar requisitos&rdquo;. Faz um cursinho de UML e começa a escrever uma quantidade sem fim de Casos de Uso sem ter noção alguma do que seu trabalho afeta no processo. Então a &ldquo;equipe&rdquo; começa a ter muito &ldquo;retrabalho&rdquo;, uma vez que os clientes não estão satisfeitos com o que está sendo entregue. Logo percebem que devem fazer o &ldquo;levantamento&rdquo; mais detalhado e passam a engessar ainda mais o processo com reuniões, assinaturas, etc. Conclusão: tempo e dinheiro desperdiçados e nenhum resultado satisfatório.</p>

<p><a href="/images/uploads/2009/04/lost_hatch_locke.jpg"><img src="/images/uploads/2009/04/lost_hatch_locke-300x199.jpg" alt="Seu trabalho é digitar xxx a cada 108 segundos" /></a></p>

<p>Falta de foco? Profissionais não qualificados? Processo falho? Não apenas isso: não há comunicação, não há troca de experiências. O waterfall favorece o aparecimento da síndrome do funcionário público: &ldquo;eu sou gerente: eu <a href="http://www.youtube.com/watch?v=R47Xe8kVrv0">córdeno</a>, não preciso saber programar&rdquo;. As decisões geralmente são tomadas por uma única pessoa. Os projetos seguem o modelo de construção civil. Os profissionais se acomodam pois não veem perspectiva, não conhecem o processo completo, não são ouvidos e por isso não são valorizados.</p>

<p>O foco destas empresas está longe de ser tecnologia. Se concentram em suas <a href="http://migre.me/rwD">buzzwords</a>, processos e reuniões e se esquecem do produto, ou seja, o software. Focam mais na solução do que no problema. Fazendo uma analogia, essas empresas são como um barco furado, onde está entrando água mas há pessoas com baldes para retirá-la e mantê-lo flutuando. Se a agua subir muito, contratam mais pessoas para operar os baldes. Enquanto isso, os executivos ficam acenando como se nada tivesse acontecendo. Quando perguntam se há algum problema, nenhum fdp infeliz tem coragem para falar que o problema é o furo no barco!</p>

<p>As empresas que focam em tecnologia e nos profissionais, tipo o <a href="http://lmgtfy.com/?q=empresas+que+investem+em+tecnologia">Google</a> ou a <a href="http://37signals.com/">37signals</a>, estão se dando bem e mostrando que agilidade não é apenas mais um processo&hellip; é algo real e que funciona!</p>

<h2>Agilidade é sair fazendo as coisas de qualquer jeito</h2>

<p>Diante do cenário caótico das empresas, um grupo de profissionais organizou um movimento a fim de unificar as práticas bem sucedidas e tornar o processo de desenvolvimento mais produtivo e pragmático: <a href="http://agilemanifesto.org/">o manifesto ágil</a>. Quem freqüenta esse blog sabe que nós somos fãs e seguidores das práticas ágeis, não porque somos fanáticos e acreditamos somente em uma verdade absoluta, mas por que já sofremos muito com projetos e empresas fracassadas, vivenciamos os problemas que compartilhamos neste blog, passamos noites em claro corrigindo código escrito por maus profissionais, acumulamos horas em reuniões suficiente para tirarmos brevê, tivemos que negociar com cliente, com o chefe, fazer entrevista, contratar, gerenciar, analisar, programar, testar&hellip; nós sofremos os problemas do waterfall na pele!</p>

<p>O termo agilidade é bem popular atualmente: &ldquo;precisamos <strong>agilizar</strong> nosso processo de desenvolvimento&rdquo;. Como divulgação do manifesto ágil é algo muito positivo, pois mais pessoas podem conhecer e utilizar as práticas ágeis. Mas, como toda fama tem seu lado negativo, não seria diferente neste caso. Muitos profissionais &ldquo;gafanhoto&rdquo; estão utilizando esse termo como alavancagem profissional. Já tem gerente falando que RUP é ágil, arquiteto defensor de modelagem UML ágil, diagrama ER ágil, modelo de dados ágil, caso de uso ágil, cronograma ágil, etc. Ou seja, estão distorcendo totalmente o propósito e a filosofia da agilidade.</p>

<p>Como disse o <a href="http://gc.blog.br/2008/11/22/agile-indo-para-o-buraco/">Chapiewski</a>, os programadores estão querendo ir direto para a sobremesa e esquecendo de comer seus vegetais. Agile é muito mais do que desenvolver iterativamente, fazer stand-up meetings e planejamentos ágeis. Não dá para ignorar todas as práticas de engenharia de software que realmente fazem com que a produção e mudanças em softwares sejam ágeis, sem contar todos os princípios e práticas que fazem uma diferença enorme.</p>

<p>O mercado que não é bobo já percebeu esse movimento migratório e lançou seus cursos de &ldquo;Gerenciamento de projetos ágeis com MSProject&rdquo;, &ldquo;Desenvolvendo aplicações web com agilidade&rdquo;, &ldquo;Aprenda a programar com JUnit e TDD&rdquo;. Não demorou muito para que uma massa de desenvolvedores colocasse o termo ágil em seus currículos. Pretensiosos demais em achar que um cursinho qualquer pode ensinar todo conceito e técnicas ágeis catalogadas por profissionais com décadas de experiência em desenvolvimento de software.</p>

<p>&ldquo;Estou aprendendo Ruby on Rails por que o mercado está <a href="http://gc.blog.br/2009/02/15/plano-de-cargos-e-salarios/">pagando bem</a>&rdquo;. do dia para a noite surgiram milhares de especialistas ágeis. O cara que programava em .NET ou Java no modelo tradicional (digitador de código), faz um cursinho rápido e de repente começa a desenvolver aplicações numa tecnologia que exige uma enorme bagagem conceitual. Faz tudo errado, pois não <strong>sabe</strong> realmente o que está fazendo, o projeto fracassa e ainda deixa a tecnologia com má fama. Isso aconteceu com PHP, ASP e está acontecendo com <a href="http://www.mouseoverstudio.com/blog/2009/04/08/nao-deixa-o-mar-te-engolir/">Rails.</a></p>

<p>Programar é difícil, não é um trabalho para qualquer aventureiro. É preciso <a href="http://akitaonrails.com/2009/04/17/off-topic-devo-fazer-faculdade">estudar</a> muito, se dedicar e principalmente, gostar! Não basta apenas estudar para conseguir uma <a href="http://www.nomedojogo.com/2009/02/17/um-modelo-de-maturidade-para-projetos-rails-e-pratico/">certificação</a> pois não garante nada. Deve-se viver a programação, participar de fóruns, contribuir com projetos open-source, discutir idéias, ser auto-crítico, ler muito, praticar, apreciar as boas práticas e abolir o que não presta&hellip;</p>

<p><a href="/images/uploads/2009/04/controle-wii-remote.jpg"><img src="/images/uploads/2009/04/controle-wii-remote-225x300.jpg" alt="Agilidade é propor soluções simples para os problemas" /></a></p>

<p>Agilidade não é anarquia, não significa &ldquo;sair fazendo as coisas de qualquer jeito&rdquo;, dizer &ldquo;não&rdquo; para documentação, etc. É uma mudança de atitude, uma nova maneira de enfrentar os problemas e propor soluções <a href="http://blog.aspercom.com.br/2008/07/21/hierarquias-sao-inteligentes-nas-pontas/">simples e práticas</a>, é ter foco, é saber fazer mais com menos, é automatizar tarefas, é estar comprometido&hellip; agilidade é atitude.</p>

<h2>Contratamos uma consultoria para implantar Scrum</h2>

<p>Scrum é a <em>metodologia</em> da moda. Assim que começou a se popularizar entre a comunidade de desenvolvedores, não demorou muito para o que vários sites e blogs se dedicassem exclusivamente na sua divulgação, apresentando benefícios, artigos, guias, exemplos, certificados para imprimir e pendurar em uma moldura na parede, etc. Logo surgiram as consultorias especializadas em adestramento treinamento e implantação de Scrum nas empresas. Um pouco de política aqui e influência ali até que a INFO Magazine publicasse uma matéria dizendo sua empresa <strong>deveria</strong> usar Scrum como solução para todos os problemas.</p>

<p>Mais uma vez, a falta de foco e maturidade das empresas distorcem tudo. Muitas empresas &ldquo;compraram&rdquo; o Scrum como a solução pronta. Bastar treinar os funcionários, comprar blocos de post-it e tudo passa a funcionar bem e gerar lucro. Pagam um curso de &ldquo;gerenciamento de projetos com Scrum&rdquo; para os gerentes. Depois apostam todos as fichas em um projeto &ldquo;piloto&rdquo;. Fazem tudo que manda o manual: reuniões diárias, planing-pocker, quadro com post-its, etc. E o projeto&hellip; fracassa!</p>

<p><a href="/images/uploads/2009/04/burning_money.jpg"><img src="/images/uploads/2009/04/burning_money.jpg" alt="Queimando dinheiro" /></a></p>

<p>Então quer dizer que Scrum não funciona? Foi dinheiro desperdiçado? Tanto esforço para nada? Neste caso, devo dizer que sim! Se esqueceram do processo anterior falho, funcionários pouco qualificados e dos líderes sem foco. Escolheram aqueles funcionários mais &ldquo;experientes&rdquo; para serem o Scrum Master. Sim, aqueles mesmos que só sabiam escrever casos de uso e diagramas UML. Se esqueceram dos valores, dos princípios, <a href="http://rogerioalcantara.blogspot.com/2009/04/ah-entao-vc-usa-scrum.html">da atitude</a>, do relacionamento com o cliente. O pensamento não mudou, o foco ainda era no processo. Depois de tanto esforço, só deram outro nome o waterfall. Não demorou muito e surgiram os papéis, artefatos, documentos&hellip; ou seja, a empresa continua cometendo os mesmos erros!</p>

<p>Não importa a tecnologia ou processo se não souber usá-lo corretamente! E definitivamente Scrum não pode ser encarado como mais um processo bonitinho, com seus papéis, artefatos, bla bla bla. Um processo de software que funciona é aquele onde a equipe está realmente comprometida e tem experiência acumulada para enfrentar e resolver problemas ao longo do desenvolvimento da aplicação. O processo, ou metodologia, será meramente um nome para as práticas que a equipe conhece e utiliza naturalmente.</p>

<h2>Resumo</h2>

<p>Não há ferramenta, metodologia ou processo que substitua a atitude e experiência de um verdadeiro desenvolvedor ágil. Estude, pratique, esteja comprometido, estude denovo, questione-se, estude novamente. <a href="http://smartic.us/2008/09/09/10-things-you-could-be-doing-to-your-code-right-now/">Revise seu código</a>, estude mais um pouco, e principalmente, tenha atitude! <strong>Agilidade não é metodologia, é atitude!</strong></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/remarkable-jqgrid-no-rails-heroku-e-github-issues/">Remarkable, jqGrid No Rails, Heroku E Github Issues</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-20T04:00:42+00:00" pubdate data-updated="true">Apr 20<span>th</span>, 2009</time>
        | 
  


  <span class="byline author vcard">Posted by <span class="fn"><a class='author' href='/author/admin/'>Equipe 1up4developers</a></span></span>


        
         | <a href="/2009/04/remarkable-jqgrid-no-rails-heroku-e-github-issues/#disqus_thread">Comments</a>
        
      </p>
    
    
      <br/>
      
  
  


<div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://1up4dev.org/2009/04/remarkable-jqgrid-no-rails-heroku-e-github-issues/" data-text="Remarkable, jqGrid no Rails, Heroku e Github issues" data-via="1up4dev" data-counturl="http://1up4dev.org/2009/04/remarkable-jqgrid-no-rails-heroku-e-github-issues/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium" data-href="http://1up4dev.org/2009/04/remarkable-jqgrid-no-rails-heroku-e-github-issues/"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false" data-url="http://1up4dev.org/2009/04/remarkable-jqgrid-no-rails-heroku-e-github-issues/"></div>
  
</div>

    
  </header>


  <div class="entry-content"><p>Este é o primeiro post que publicaremos semanalmente reunindo novidades sobre desenvolvimento, artigos, notícias e temas variados sobre Rails.</p>

<h2><a href="http://www.nomedojogo.com/2009/04/14/remarkable-30-is-out-and-its-well-remarkable/">Remarkable 3.0</a></h2>

<p>Foi lançada a nova versão do Remarkable, um framework para testes com RSpec. Dentre as novidades, estão:</p>

<ul>
<li><p>I18n, possibilitando gerar o output das specs no seu idioma favorito fluente</p></li>
<li><p>Pending Macros, facilitando o agrupamento das specs pendentes</p></li>
<li><p>Macro stubs e mais opções de Matchers, simplificando testes com mocks</p></li>
</ul>


<p>Para instalar basta um <code>sudo gem install remarkable_rails</code></p>

<p>Saiba mais no site do <a href="http://www.nomedojogo.com/2009/04/14/remarkable-30-is-out-and-its-well-remarkable/">Carlos Brando</a>, lendo a <a href="http://remarkable.rubyforge.org/rails/">documentação</a> ou espiando o código no <a href="http://github.com/carlosbrando/remarkable/tree/master">Github</a>.</p>

<h2><a href="http://www.2dconcept.com/jquery-grid-rails-plugin">jqGrid no Rails</a></h2>

<p><a href="http://jquery.com/">jQuery</a> é um dos frameworks Javascript mais populares do mercado. O que <a href="http://www.2dconcept.com/articles/8-jquery-grid-rails-plugin">esse cara</a> fez foi juntar o <a href="http://www.trirand.com/jqgrid35/jqgrid.html">jqGrid</a>, que é um plugin muito bom para trabalhar com grids, num plugin para Rails, facilitando sua utilização.</p>

<p>Veja <a href="http://www.2dconcept.com/jquery-grid-rails-plugin">aqui</a> um guia de utilização do plugin, a <a href="http://github.com/ahe/jqgrid_demo_app/tree/master">aplicação de exemplo</a> ou confira o código no <a href="http://github.com/ahe/2dc_jqgrid/tree/master">Github</a>.</p>

<h2><a href="http://heroku.com/">Heroku</a></h2>

<p>Apesar da simplicidade do <a href="http://1up4dev.org/2009/04/business-bingo-generator/">Business Bingo Generator</a>, houve muitas &ldquo;manhas&rdquo; aprendidas no seu desenvolvimento. O Heroku foi uma delas, onde pudemos publicar rapidamente a aplicação. Se você quer hospedar um projeto simples feito em Rails, nós o recomendamos. O seu uso é muito simples e a incrível idéia de usar o git como interface para deploy é realmente sensacional. Basta instalar o client do Heroku, dar um &ldquo;git push&rdquo; e pronto: a aplicação está no ar!</p>

<h2><a href="http://github.com/blog/411-github-issue-tracker">Github Issue Tracker</a></h2>

<p>Nova funcionalidade no GitHub para facilitar nossas vidas, permitindo informar os &ldquo;bugs&rdquo; nos projetos. No link acima, contém o vídeo &ldquo;I_ntroduction to GitHub Issues_&rdquo; para mais detalhes.</p>

<p>Caso já use um Issue Tracker para o seu projeto no github, você pode desabilitá-lo na seção  do <em>Features </em>na aba<em> Admin</em>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/business-bingo-generator/">Business Bingo Generator</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-13T12:03:13+00:00" pubdate data-updated="true">Apr 13<span>th</span>, 2009</time>
        | 
  


  <span class="byline author vcard">Posted by <span class="fn"><a class='author' href='/author/rogerbarreto/'>Roger Leite</a></span></span>


        
         | <a href="/2009/04/business-bingo-generator/#disqus_thread">Comments</a>
        
      </p>
    
    
      <br/>
      
  
  


<div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://1up4dev.org/2009/04/business-bingo-generator/" data-text="Business Bingo Generator" data-via="1up4dev" data-counturl="http://1up4dev.org/2009/04/business-bingo-generator/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium" data-href="http://1up4dev.org/2009/04/business-bingo-generator/"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false" data-url="http://1up4dev.org/2009/04/business-bingo-generator/"></div>
  
</div>

    
  </header>


  <div class="entry-content"><p>Para quem tem algum tempo de internet, é fácil notar como as piadas se repetem, ou melhor, assim como olimpíadas ou copa do mundo, re-aparecem a cada quatro anos por exemplo. Não foi diferente com a piada que recebi (novamente) a pouco tempo, o Business Bingo. O que torna a piada muito divertida é o seu alto teor sarcástico e real, foi quando pensei, porque não imprimir esta cartela e realmente testar! Foi assim que surgiu a idéia de fazer um gerador de cartelas para o Business Bingo! :D</p>

<p><a href="/images/uploads/2009/04/ideia.jpg"><img src="/images/uploads/2009/04/ideia-299x300.jpg" alt="idéia" /></a></p>

<h2><a href="http://business-bingo.heroku.com/">Business Bingo! Generator</a></h2>

<p>A idéia deste post, além de ajudar a divulgar o site, é ter um local central para <strong>comentários, sugestões, reclamações e elogios</strong> para o <a href="http://business-bingo.heroku.com/">Business Bingo Generator</a>.</p>

<h3>Curiosidade</h3>

<ul>
<li><p>O Business Bingo, também conhecido como <a href="http://en.wikipedia.org/wiki/Buzzword_bingo">Buzzword Bingo</a>, ganhou notoridade em 1994, com uma tirinha publicada do <a href="http://dilbert.com/fast/1994-02-22/">Dilbert</a>.</p></li>
<li><p>Um dos &ldquo;grandes&rdquo; eventos &ldquo;documentados&rdquo;, foi em 1996, que alunos do MIT o usaram no discurso do vice-presidente dos EUA, Al-Gore.</p></li>
</ul>


<h3>Uma nota rápida a desenvolvedores</h3>

<p>A primeira versão foi desenvolvida em dois dias, isso mesmo, dois dias e já estava em produção. Eu e o Rodrigo Panachi resolvemos implementar a idéia do <em>&ldquo;generator&rdquo;</em> para aprender na prática como funciona o Ruby on Rails. Num post futuro irei colocar mais detalhes técnicos, que apesar de ser uma aplicação muito pequena, podemos tirar proveito de grandes aulas. Para quem quiser contribuir, o <a href="http://github.com/rpanachi/business-bingo-generator/tree/master">Business Bingo Generator está no GitHub</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/03/tpw-testando-sistemas-legados-classes-utils/">TPW - Testando Sistemas Legados: Classes Utils</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-03-03T14:11:00+00:00" pubdate data-updated="true">Mar 3<span>rd</span>, 2009</time>
        | 
  


  <span class="byline author vcard">Posted by <span class="fn"><a class='author' href='/author/rodrigopanachi/'>Rodrigo Panachi</a></span></span>


        
         | <a href="/2009/03/tpw-testando-sistemas-legados-classes-utils/#disqus_thread">Comments</a>
        
      </p>
    
    
      <br/>
      
  
  


<div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://1up4dev.org/2009/03/tpw-testando-sistemas-legados-classes-utils/" data-text="TPW - Testando sistemas legados: classes Utils" data-via="1up4dev" data-counturl="http://1up4dev.org/2009/03/tpw-testando-sistemas-legados-classes-utils/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium" data-href="http://1up4dev.org/2009/03/tpw-testando-sistemas-legados-classes-utils/"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false" data-url="http://1up4dev.org/2009/03/tpw-testando-sistemas-legados-classes-utils/"></div>
  
</div>

    
  </header>


  <div class="entry-content"><p>Aproveitando o gancho do <a href="http://1up4dev.org/2009/02/tpw-testando-sistemas-legados-manipulando-dependencias/">post anterior</a> sobre manipulação de dependências, decidi dedicar um post apenas sobre este tema, pois acredito ser de grande ajuda para todos desenvolvedores que precisam manter código legado.</p>

<p>Em projetos legados é comum encontrarmos classes Util (aka Helpers) espalhadas por todo o código, fazendo desde coisas simples como formatar datas ou números, até coisas mágicas como cache de objetos, operações com <a href="http://en.wikibooks.org/wiki/Java_Programming/Reflection/Overview">reflection</a>, escrita de logs, etc. Mesmo que tenham sua &ldquo;utilidade&rdquo;, são um <a href="http://en.wikipedia.org/wiki/Separation_of_concerns">terror</a> quando falamos de testes! Além de ser um <a href="http://en.wikipedia.org/wiki/God_object">forte indício</a> de um <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">design fraco</a>, as chamadas a seus métodos, geralmente estáticos, geram dependências nas classes que a utilizam.</p>

<p>Este é a estrutura comum (bem simplificada) de uma classe Util com métodos estáticos:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MagicUtil</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">getConstanteSecreta</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="s">&quot;VALOR_SECRETO_AMBIENTE&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Neste caso, uma boa estratégia para os testes seria encapsular a chamada da classe Util em um método <em>protected</em>, para que seja sobrescrito na classe de teste, assumindo o comportamento desejado. Porém, se a classe Util for largamente referenciada no projeto (o que é comum) seria preciso <em>refatorar</em> todas a classes que a utilizam para escrever um teste completo.</p>

<p>A estratégia proposta é <a href="http://pt.wikipedia.org/wiki/Refatora%C3%A7%C3%A3o">refatorar</a> a classe Util, aplicando o padrão <a href="http://pt.wikipedia.org/wiki/Singleton">Singleton</a> e transformando os métodos estáticos em métodos de instância, porém mantendo as assinaturas estáticas, que devem referenciar os métodos da instância. Uma vez que a Util pode ser instanciada (mesmo que internamente), é possível manipular seu comportamento através da injeção de um objeto <em>Mock</em>, por exemplo<em>:</em></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MagicUtil</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kd">static</span> <span class="n">MagicUtil</span> <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MagicUtil</span><span class="o">();</span>
</span><span class='line'>    <span class="kd">protected</span> <span class="kd">static</span> <span class="n">MagicUtil</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">instance</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">protected</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setInstance</span><span class="o">(</span><span class="n">MagicUtil</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">instance</span> <span class="o">=</span> <span class="n">obj</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getConstanteSecretaInstancia</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="s">&quot;VALOR_SECRETO_AMBIENTE&quot;</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">getConstanteSecreta</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nf">getInstance</span><span class="o">().</span><span class="na">getConstanteSecretaInstancia</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Assim, a Util continua com o mesmo comportamento e seu <strong>contrato</strong> foi mantido. Agora, no seu teste, basta escrever o mock (estendendo a classe e sobrescrevendo os métodos) e injetá-lo na instância interna da Util:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ClasseTest</span> <span class="o">{</span>
</span><span class='line'>    <span class="nd">@Test</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testaMetodoDependenteDeMagicUtil</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">new</span> <span class="nf">MagicUtil</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>            <span class="o">{</span>
</span><span class='line'>                <span class="n">setInstance</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>            <span class="kd">public</span> <span class="n">String</span> <span class="nf">getConstanteSecretaInstancia</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="s">&quot;MEU_VALOR_MOCK&quot;</span><span class="o">;</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">};</span>
</span><span class='line'>        <span class="n">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="s">&quot;MEU_VALOR_MOCK&quot;</span><span class="o">,</span> <span class="n">MagicUtil</span><span class="o">.</span><span class="na">getConstanteSecreta</span><span class="o">());</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Neste caso a classe anônima (que estende a Util) passa sua própria instância (this) para o método protegido <em>setInstance()</em>. Note que a chamada do método (estático) da Util continua igual ao da classe original, sem o refactoring.</p>

<p>Nos projetos que preciso manter, esta estratégia tem sido muito útil para resolver os problemas das &ldquo;teias&rdquo; de Utils. Porém é um recurso paliativo e <a href="http://gcirne.wordpress.com/2008/01/14/classes-util/">não deve ser utilizado</a> como o &ldquo;padrão&rdquo;. O ideal é sempre evitar classes Utils, lembrando que uma classe deve sempre ter comportamentos bem definidos e o <a href="http://domaindrivendesign.org/">nome já deve indicar</a> sua responsabilidade.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/02/tpw-testando-sistemas-legados-manipulando-dependencias/">TPW - Testando Sistemas Legados: Manipulando Dependências</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-02-19T15:48:35+00:00" pubdate data-updated="true">Feb 19<span>th</span>, 2009</time>
        | 
  


  <span class="byline author vcard">Posted by <span class="fn"><a class='author' href='/author/rodrigopanachi/'>Rodrigo Panachi</a></span></span>


        
         | <a href="/2009/02/tpw-testando-sistemas-legados-manipulando-dependencias/#disqus_thread">Comments</a>
        
      </p>
    
    
      <br/>
      
  
  


<div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://1up4dev.org/2009/02/tpw-testando-sistemas-legados-manipulando-dependencias/" data-text="TPW - Testando sistemas legados: manipulando dependências" data-via="1up4dev" data-counturl="http://1up4dev.org/2009/02/tpw-testando-sistemas-legados-manipulando-dependencias/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium" data-href="http://1up4dev.org/2009/02/tpw-testando-sistemas-legados-manipulando-dependencias/"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false" data-url="http://1up4dev.org/2009/02/tpw-testando-sistemas-legados-manipulando-dependencias/"></div>
  
</div>

    
  </header>


  <div class="entry-content"><p>Pela definição de <a href="http://www.amazon.com/Working-Effectively-Legacy-Robert-Martin/dp/0131177052">Michael Feather</a>, <strong>código legado é código sem testes</strong>! Não importa se o código foi escrito semana passada ou alguns anos atrás. Qualquer manutenção será de difícil entendimento por outra pessoa e não haverá garantias de seu funcionamento. Uma vez que não há &ldquo;controle&rdquo;, é mais difícil rastrear as alterações; pior do que uma nova funcionalidade que não funciona, é uma funcionalidade antiga que começa a falhar. Este é um risco que um desenvolvedor não pode correr!</p>

<h3>Não altere código legado até que seja possível testá-lo</h3>

<p>Um dos problemas mais comuns em sistemas legados é a interdependência de classes, ou seja, o <a href="http://en.wikipedia.org/wiki/Coupling_(computer_science">alto acoplamento</a>), que sempre está ligado com a <a href="http://en.wikipedia.org/wiki/Cohesion_(computer_science">baixa coesão</a>). Se estes termos são difíceis de entender, pense em acoplamento como sendo o grau com que as classes referenciam umas as outras e coesão o quanto uma classe está focada em realizar suas responsabilidades.</p>

<p>Para que seja possível testar o comportamento de uma classe &ldquo;acoplada&rdquo;, o comportamento de suas dependências precisa ser <a href="http://en.wikipedia.org/wiki/Method_stub">simulado</a>. Isto normalmente é feito através de objetos falsos, ou <a href="http://en.wikipedia.org/wiki/Mock_object">mocks</a>, que são injetados na instância da classe em questão. Este padrão é conhecido como <a href="http://pt.wikipedia.org/wiki/Invers%C3%A3o_de_controle">Inversão de Controle </a>e <a href="http://pt.wikipedia.org/wiki/Inje%C3%A7%C3%A3o_de_depend%C3%AAncia">Injeção de dependência</a>, onde o controle sobre as dependências da classe são delegados à outro objeto, ou normalmente um <a href="http://pt.wikipedia.org/wiki/Spring_Framework">container de objetos</a>, responsável por <a href="http://misko.hevery.com/2009/01/14/when-to-use-dependency-injection/">injetar</a> as dependências nas instâncias das classes. Simples, não?! Mas isso será detalhado em outro post&hellip;</p>

<p>Voltando para os testes, no <a href="http://1up4dev.org/2009/02/tpw-testando-sistemas-legados-automatizando-build/">post anterior</a> começamos a organizar o projeto automatizando o build e centralizando a execução dos testes para evitar que fiquem &ldquo;soltos&rdquo; pelo código. Agora vamos nos concentrar em escrever os casos de teste, <a href="http://pt.wikipedia.org/wiki/Refatora%C3%A7%C3%A3o">refatorando</a> o necessário para lidar com as dependências das classes.</p>

<p>Partindo da premissa que o projeto não possuí nenhum framework de inversão de controle, utilizaremos um certo &ldquo;padrão&rdquo; que permite manipular as dependências de uma classe por meio de herança, sem alterar seu comportamento original. <strong>A idéia é resolver as dependências da classe através de getters protegidos, que podem ser sobrescritos em uma classe filha no momento do teste</strong>. Isso permite que, na classe estendida, o método sobrescrito retorne um objeto mock, por exemplo, com o comportamento esperado para o teste.</p>

<p>Vamos tomar como exemplo, uma classe simples com algumas dependências e responsável por encapsular algumas regras de negócio referentes à <em>Estoque</em>.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EstoqueLogic</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">verificaDisponibilidade</span><span class="o">(</span><span class="n">Produto</span> <span class="n">produto</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">quantidade</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">EstoqueDAO</span> <span class="n">dao</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EstoqueDAO</span><span class="o">();</span>
</span><span class='line'>        <span class="n">Estoque</span> <span class="n">estoque</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">localizaProduto</span><span class="o">(</span><span class="n">produto</span><span class="o">.</span><span class="na">getCodigo</span><span class="o">());</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">estoque</span><span class="o">.</span><span class="na">getQuantidade</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="n">quantidade</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Da forma como esta classe foi escrita, é impossível testar a regra de <em>disponibilidade</em> independentemente, pois depende do objeto <em>EstoqueDAO</em> para localizar as informações necessárias para o método. Mas com um pequeno refactoring, a responsabilidade de resolver a dependência <em>EstoqueDAO</em> passa a ser responsabilidade da própria classe <em>Estoque</em>:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EstoqueLogic</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">verificaDisponibilidade</span><span class="o">(</span><span class="n">Produto</span> <span class="n">produto</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">quantidade</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">EstoqueDAO</span> <span class="n">dao</span> <span class="o">=</span> <span class="n">getEstoqueDAO</span><span class="o">();</span>
</span><span class='line'>        <span class="n">Estoque</span> <span class="n">estoque</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">localizaProduto</span><span class="o">(</span><span class="n">produto</span><span class="o">.</span><span class="na">getCodigo</span><span class="o">());</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">estoque</span><span class="o">.</span><span class="na">getQuantidade</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="n">quantidade</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">protected</span> <span class="n">EstoqueDAO</span> <span class="nf">getEstoqueDAO</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="k">new</span> <span class="nf">EstoqueDAO</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Desta forma, é possível &ldquo;injetar&rdquo; um objeto que simule a dependência do <em>EstoqueDAO</em> estendendo a classe e sobrescrevendo o método <em>getEstoqueDAO()</em> para retornar a instância desejada. O teste ficaria mais ou menos assim:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EstoqueLogicTest</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testVerificandoDisponibilidadeDeUmProduto</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">//Criando o objeto EstoqueDAO mock, simulando o comportamento desejado</span>
</span><span class='line'>        <span class="kd">final</span> <span class="n">EstoqueDAO</span> <span class="n">estoqueDAOMock</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EstoqueDAO</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>            <span class="nd">@Override</span>
</span><span class='line'>            <span class="kd">public</span> <span class="n">Estoque</span> <span class="nf">localizaProduto</span><span class="o">(</span><span class="n">String</span> <span class="n">codigo</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">Produto</span> <span class="n">produto</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Produto</span><span class="o">();</span>
</span><span class='line'>                <span class="n">produto</span><span class="o">.</span><span class="na">setCodigo</span><span class="o">(</span><span class="n">codigo</span><span class="o">);</span>
</span><span class='line'>                <span class="n">Estoque</span> <span class="n">estoque</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Estoque</span><span class="o">();</span>
</span><span class='line'>                <span class="n">estoque</span><span class="o">.</span><span class="na">setProduto</span><span class="o">(</span><span class="n">produto</span><span class="o">);</span>
</span><span class='line'>                <span class="n">estoque</span><span class="o">.</span><span class="na">setQuantidade</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">estoque</span><span class="o">;</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">};</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">//Sobrescrevendo o método getEstoqueDAO para retornar o Mock</span>
</span><span class='line'>        <span class="n">EstoqueLogic</span> <span class="n">logic</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EstoqueLogic</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>            <span class="nd">@Override</span>
</span><span class='line'>            <span class="kd">protected</span> <span class="n">EstoqueDAO</span> <span class="nf">getEstoqueDAO</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">estoqueDAOMock</span><span class="o">;</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">};</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">//Definindo o teste e executando</span>
</span><span class='line'>        <span class="n">Produto</span> <span class="n">produto</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Produto</span><span class="o">();</span>
</span><span class='line'>        <span class="n">produto</span><span class="o">.</span><span class="na">setCodigo</span><span class="o">(</span><span class="s">&quot;123456&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="kt">boolean</span> <span class="n">estaDisponivel</span> <span class="o">=</span> <span class="n">logic</span><span class="o">.</span><span class="na">verificaDisponibilidade</span><span class="o">(</span><span class="n">produto</span><span class="o">,</span> <span class="mi">10</span><span class="o">);</span>
</span><span class='line'>        <span class="n">assertTrue</span><span class="o">(</span><span class="n">estaDisponivel</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="kt">boolean</span> <span class="n">naoEstaDisponivel</span> <span class="o">=</span> <span class="n">logic</span><span class="o">.</span><span class="na">verificaDisponibilidade</span><span class="o">(</span><span class="n">produto</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
</span><span class='line'>        <span class="n">assertTrue</span><span class="o">(</span><span class="n">naoEstaDisponivel</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>O método<em> getEstoqueDAO() </em>da classe <em>EstoqueLogic</em> foi sobrescrito para retornar o objeto <em>estoqueDAOMock</em> com as informações necessárias para o teste, ou seja, o comportamento das dependências foi simulado, possibilitando que o teste ficasse concentrado apenas da classe <em>Estoque</em>.</p>

<h3>Elimine as dependências e teste onde os bugs estão!</h3>

<p>Este padrão fornece apenas uma maneira de lidar com as dependências das classes para escrever testes. A dica aqui é manter o <a href="http://1up4dev.org/2008/11/foco-no-problema/">foco</a>: defina apenas testes para as funcionalidades que estiver alterando e que exercitem pontos críticos e/ou regras de negócio. Então, refatore apenas as classes necessárias para simular e validar o fluxo destes testes, nem que seja apenas seus &ldquo;<a href="http://www.fragmental.com.br/wiki/index.php/Contratos_Nulos">contratos</a>&rdquo;. Não há necessidade de escrever testes muito granulares nem alterar todas as classes de um sistema legado.</p>

<p>No caso de classes com muitas dependências, o melhor é refatorá-la, separar as responsabilidades e testá-las individualmente. Para classes com dependências de Utils e/ou muitas chamadas à métodos estáticos, uma estratégia parecida pode ser utilizada. Mas estes são assuntos para os próximos posts. Acompanhem!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/02/tpw-testando-sistemas-legados-automatizando-build/">TPW - Testando Sistemas Legados: Automatizando O Build</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-02-12T02:01:31+00:00" pubdate data-updated="true">Feb 12<span>th</span>, 2009</time>
        | 
  


  <span class="byline author vcard">Posted by <span class="fn"><a class='author' href='/author/rodrigopanachi/'>Rodrigo Panachi</a></span></span>


        
         | <a href="/2009/02/tpw-testando-sistemas-legados-automatizando-build/#disqus_thread">Comments</a>
        
      </p>
    
    
      <br/>
      
  
  


<div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://1up4dev.org/2009/02/tpw-testando-sistemas-legados-automatizando-build/" data-text="TPW - Testando sistemas legados: automatizando o build" data-via="1up4dev" data-counturl="http://1up4dev.org/2009/02/tpw-testando-sistemas-legados-automatizando-build/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium" data-href="http://1up4dev.org/2009/02/tpw-testando-sistemas-legados-automatizando-build/"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false" data-url="http://1up4dev.org/2009/02/tpw-testando-sistemas-legados-automatizando-build/"></div>
  
</div>

    
  </header>


  <div class="entry-content"><p>Imagine o cenário: você caiu de para-quedas naquele projeto que todo mundo na empresa fez gambiarra deu manutenção e agora precisa implementar uma nova funcionalidade. Mesmo que tenha alguma documentação, vai ser inútil neste caso. Então você começa a vasculhar o código e encontra dezenas de classes com nomes parecidos, vários arquivos XML&rsquo;s dos inúmeros frameworks utilizados anteriormente, <a href="http://www.fragmental.com.br/wiki/index.php/Evitando_VOs_e_BOs">TO&rsquo;s, VO&rsquo;s</a>, Actions, Utils&hellip; ou seja, um lugar cheio de <a href="http://blog.improveit.com.br/articles/2007/01/05/nada-de-janelas-quebradas">janelas quebradas</a>.</p>

<p>O mais fácil neste caso seria fazer seu trabalho, quebrando mais algumas janelas caso necessário, e cair fora o quanto antes. Mas você, <a href="http://agilemanifesto.org/">desenvolvedor ágil</a>, sabe que além de ser falta de profissionalismo, você corre o risco de cair novamente no mesmo projeto. Então aproveite a oportunidade para fazer uma pequena faxina e preparar o projeto para escrever os testes das novas funcionalidades que irá desenvolver, garantido assim a qualidade, pelo menos, do seu trabalho.</p>

<p>Durante minha carreira fui obrigado tive a oportunidade de dar manutenção em diversos projetos &ldquo;<a href="http://blog.fragmental.com.br/2006/04/02/2006-o-inicio-da-arquitetura-heterogenea-java-ee-ou-qual-o-melhor-framework-web/">frankenstein</a>&rdquo; de onde adquiri certa experiência para poder &ldquo;organizar a casa&rdquo; e trabalhar decentemente no código. É claro que não estou falando em escrever testes para o projeto inteiro, mas pelo menos garantir a qualidade do código que desenvolvi ou irei desenvolver.</p>

<p>Há um certo padrão que todo software de qualidade deve seguir. Além dos padrões e boas práticas como organização do código em pacotes vs. responsabilidade, uma coisa essencial para o projeto é sua construção, ou seja, a forma que o software é &ldquo;entregue&rdquo;. Acredito que este seja o primeiro passo para começar a organizar a bagunça de um projeto.</p>

<p>A construção do projeto deve ser automática e desempenhada por uma ferramenta de build como o <a href="http://ant.apache.org/index.html">Ant</a> ou <a href="http://maven.apache.org/">Maven</a>, com tarefas (tasks) e objetivos bem definidos. Normalmente, um build do projeto deve:</p>

<ol>
<li><p> Preparar o código e dependências</p></li>
<li><p> Compilar os arquivos fontes</p></li>
<li><p> Executar os testes</p></li>
<li><p> Empacotar a distribuição</p></li>
</ol>


<p>No exemplo abaixo usarei o Ant, que é a ferramenta de build (para Java) mais popular do mercado e muito simples de utilizar. O importante neste processo é ser pragmático: não perca o foco! Você poderia (e futuramente deveria) utilizar o Maven, mas adequá-lo a um sistema legado não é tão simples quanto parece.</p>

<p>Tendo os objetivos do build definidos, basta escrever o script do Ant. Isso deve ser feito no arquivo build.xml, no root do projeto. As tarefas são definidas pelas tags <target> e podem ser dependentes para garantir a sequencia de execução. Em cada target são definidas as ações executadas, como rodar o compilador (javac), copiar um arquivo, rodar os testes, etc. Uma vez que as tarefas estão configuradas, basta executar o build pelo próprio IDE ou linha de comando.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;project</span> <span class="na">name=</span><span class="s">&quot;frank&quot;</span> <span class="na">default=</span><span class="s">&quot;package&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;path</span> <span class="na">id=</span><span class="s">&quot;classpath&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;pathelement</span> <span class="na">location=</span><span class="s">&quot;build/bin&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;src&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;include</span> <span class="na">name=</span><span class="s">&quot;*.java&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/fileset&gt;</span>
</span><span class='line'>      <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;lib&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;include</span> <span class="na">name=</span><span class="s">&quot;*.jar&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/fileset&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/path&gt;</span>
</span><span class='line'>  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;clean&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>       <span class="nt">&lt;delete</span> <span class="na">dir=</span><span class="s">&quot;build&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>        <span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">&quot;build&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/target&gt;</span>
</span><span class='line'>  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;compile&quot;</span> <span class="na">depends=</span><span class="s">&quot;clean&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;javac</span> <span class="na">srcdir=</span><span class="s">&quot;src&quot;</span> <span class="na">destdir=</span><span class="s">&quot;build&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;classpath</span> <span class="na">refid=</span><span class="s">&quot;classpath&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/javac&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/target&gt;</span>
</span><span class='line'>  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;test&quot;</span> <span class="na">depends=</span><span class="s">&quot;compile&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;junit&gt;</span>
</span><span class='line'>          <span class="nt">&lt;classpath</span> <span class="na">refid=</span><span class="s">&quot;classpath&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>          <span class="nt">&lt;batchtest&gt;</span>
</span><span class='line'>              <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;build&quot;</span> <span class="na">includes=</span><span class="s">&quot;*Test&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/batchtest&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/junit&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/target&gt;</span>
</span><span class='line'>  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;package&quot;</span> <span class="na">depends=</span><span class="s">&quot;compile, test&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;war</span> <span class="na">destfile=</span><span class="s">&quot;frank.war&quot;</span> <span class="na">webxml=</span><span class="s">&quot;web/WEB-INF/web.xml&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;classes</span> <span class="na">dir=</span><span class="s">&quot;build&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/target&gt;</span>
</span><span class='line'><span class="nt">&lt;/project&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Neste script estão definidas as tarefas necessárias para executar um build, conforme citei anteriormente. Por enquanto isto será o mínimo necessário para dar suporte as próximas etapas da sua missão. Mesmo que o projeto já tenha um build em Ant aproveite para <a href="http://www.onjava.com/pub/a/onjava/2003/12/17/ant_bestpractices.html">revisá-lo</a>. Tarefas bem simples e bem definidas são mais fáceis de entender e manter.</p>

<p>Com o build implementado, você não terá mais que se preocupar com o empacotamento do projeto. Agora comece a direcionar seus esforços para escrever os testes. Deixe que o Ant se encarregará de executá-los para você.</p>

<p>No próximo post vou apresentar alguns padrões e práticas de refactoring utilizados para possibilitar escrever testes que dependem de classes legadas do projeto.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/8/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/page/6/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>ln -s /feed</h1>
  <br />
  <a href="http://feeds.feedburner.com/1up4developers"><img src="http://feeds.feedburner.com/~fc/1up4developers?bg=000000&amp;fg=FFFFFF&amp;anim=1" height="26" width="88" style="border:0" alt="" /></a>
</section>
<section>
  <h1>head -5 /posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2014/09/magica-com-o-repl-do-clojure/">Fazendo mágica com o REPL do Clojure</a>
      </li>
    
      <li class="post">
        <a href="/2014/09/integracao-continua-e-entrega-continua-de-modo-facil-com-wercker/">Integração Contínua e Entrega Contínua de modo fácil com Wercker</a>
      </li>
    
      <li class="post">
        <a href="/2014/04/alguns-truques-com-o-repl-do-clojure/">Alguns truques com o REPL do Clojure</a>
      </li>
    
      <li class="post">
        <a href="/2013/09/sowing-the-seeds-of-code/">Sowing the seeds of code</a>
      </li>
    
      <li class="post">
        <a href="/2013/09/off-topic-transforme-seu-roteador-wireless-em-um-nas-mediaserver-upnp-dlna-bittorrent-client-com-openwrt/">[Off-Topic] Transforme seu roteador wireless em um NAS, MediaServer UPnP/DLNA e BitTorrent client com OpenWRT</a>
      </li>
    
  </ul>
</section>




<section>
  <h1>ls /authors</h1>
  <ul id="authors">
    
      
    
      
        <li class="author">
          <a href="/author/rodrigopanachi">Rodrigo Panachi</a> (36)
        </li>
      
    
      
        <li class="author">
          <a href="/author/rogerbarreto">Roger Leite</a> (33)
        </li>
      
    
      
        <li class="author">
          <a href="/author/pbalduino">Plínio Balduino</a> (16)
        </li>
      
    
      
        <li class="author">
          <a href="/author/miguelhorlle">Miguel Horlle</a> (4)
        </li>
      
    
      
        <li class="author">
          <a href="/author/andrefarina">André Farina</a> (1)
        </li>
      
    
      
        <li class="author">
          <a href="/author/hbulhoes">Humberto Bulhões</a> (8)
        </li>
      
    
      
        <li class="author">
          <a href="/author/rramos">Rogério Ramos</a> (1)
        </li>
      
    
      
        <li class="author">
          <a href="/author/tonyfabeen">Tony Fabeen</a> (2)
        </li>
      
    
  </ul>
</section>
<section>
  <h1>ls /categories</h1>
  <p class="category-list">
    
      <a class='category' href='/categories/hello/'>hello</a>&nbsp;
    
      <a class='category' href='/categories/cascata/'>cascata</a>&nbsp;
    
      <a class='category' href='/categories/processos/'>processos</a>&nbsp;
    
      <a class='category' href='/categories/waterfall/'>waterfall</a>&nbsp;
    
      <a class='category' href='/categories/questionamento/'>questionamento</a>&nbsp;
    
      <a class='category' href='/categories/real-world/'>real world</a>&nbsp;
    
      <a class='category' href='/categories/resenhas/'>resenhas</a>&nbsp;
    
      <a class='category' href='/categories/web/'>web</a>&nbsp;
    
      <a class='category' href='/categories/marketing/'>marketing</a>&nbsp;
    
      <a class='category' href='/categories/tutorial/'>tutorial</a>&nbsp;
    
      <a class='category' href='/categories/evento/'>evento</a>&nbsp;
    
      <a class='category' href='/categories/eventos/'>eventos</a>&nbsp;
    
      <a class='category' href='/categories/quick-tips/'>quick tips</a>&nbsp;
    
      <a class='category' href='/categories/projetos/'>projetos</a>&nbsp;
    
      <a class='category' href='/categories/novidades-da-semana/'>novidades da semana</a>&nbsp;
    
      <a class='category' href='/categories/rails/'>rails</a>&nbsp;
    
      <a class='category' href='/categories/ruby/'>ruby</a>&nbsp;
    
      <a class='category' href='/categories/sitefique-dot-me/'>sitefique.me</a>&nbsp;
    
      <a class='category' href='/categories/lisp/'>lisp</a>&nbsp;
    
      <a class='category' href='/categories/linux/'>linux</a>&nbsp;
    
      <a class='category' href='/categories/off-topic/'>off-topic</a>&nbsp;
    
      <a class='category' href='/categories/clojure/'>clojure</a>&nbsp;
    
      <a class='category' href='/categories/comunidade/'>comunidade</a>&nbsp;
    
      <a class='category' href='/categories/javascript/'>javascript</a>&nbsp;
    
      <a class='category' href='/categories/agile/'>agile</a>&nbsp;
    
      <a class='category' href='/categories/continuous-delivery/'>continuous delivery</a>&nbsp;
    
      <a class='category' href='/categories/continuous-integration/'>continuous integration</a>&nbsp;
    
  </p>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - 1up4developers -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>. Design by <a href="http://octopressthemes.com">Octopress Themes</a>.</span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = '1up4dev';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
